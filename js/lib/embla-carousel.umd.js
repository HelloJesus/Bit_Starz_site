!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n="undefined"!=typeof globalThis?globalThis:n||self).EmblaCarousel=t()}(this,(function(){"use strict";function n(n){return"number"==typeof n}function t(n){return"string"==typeof n}function e(n){return"boolean"==typeof n}function r(n){return"[object Object]"===Object.prototype.toString.call(n)}function o(n){return"undefined"!=typeof MouseEvent&&n instanceof MouseEvent}function i(n){return Math.abs(n)}function c(n){return Math.sign(n)}function u(n,t){return i(n-t)}function s(n){return l(n).map(Number)}function a(n){return n[d(n)]}function d(n){return Math.max(0,n.length-1)}function l(n){return Object.keys(n)}function f(n,t){return[n,t].reduce(((n,t)=>(l(t).forEach((e=>{const o=n[e],i=t[e],c=r(o)&&r(i);n[e]=c?f(o,i):i})),n)),{})}function p(t,e){const r={start:function(){return 0},center:function(n){return o(n)/2},end:o};function o(n){return e-n}return{measure:function(o){return n(t)?e*Number(t):r[t](o)}}}function m(){let n=[];const t={add:function(e,r,o,i={passive:!0}){return e.addEventListener(r,o,i),n.push((()=>e.removeEventListener(r,o,i))),t},clear:function(){n=n.filter((n=>n()))}};return t}function g(n,t){const e=i(n-t);function r(t){return t<n}function o(n){return n>t}function c(n){return r(n)||o(n)}return{length:e,max:t,min:n,constrain:function(e){return c(e)?r(e)?n:t:e},reachedAny:c,reachedMax:o,reachedMin:r,removeOffset:function(n){return e?n-e*Math.ceil((n-t)/e):n}}}function h(n,t,e){const{min:r,constrain:o}=g(0,n),c=n+1;let u=s(t);function s(n){return e?i((c+n)%c):o(n)}function a(){return u}function d(n){return u=s(n),l}const l={add:function(n){return d(a()+n)},clone:function(){return h(n,a(),e)},get:a,set:d,min:r,max:n};return l}function x(t){let e=t;function r(n){return e/=n,i}function o(t){return n(t)?t:t.get()}const i={add:function(n){return e+=o(n),i},divide:r,get:function(){return e},multiply:function(n){return e*=n,i},normalize:function(){return 0!==e&&r(e),i},set:function(n){return e=o(n),i},subtract:function(n){return e-=o(n),i}};return i}function y(n,t,r,s,a,d,l,f,p,h,y,v,b,S,w,E){const{cross:M}=n,D=["INPUT","SELECT","TEXTAREA"],A={passive:!1},I=x(0),O=m(),P=m(),z=g(50,225).constrain(b.measure(20)),T={mouse:300,touch:400},L={mouse:500,touch:600},k=S?43:25;let B=!1,H=0,F=0,N=!1,C=!1,R=!1,V=!1;function j(n){if(!C&&!V){if(!n.cancelable)return U(n);const t=a.readPoint(n),e=a.readPoint(n,M),r=u(t,H),o=u(e,F);if(C=r>o,!C)return U(n)}const e=a.pointerMove(n);e&&(R=!0),p.useFriction(.3).useDuration(1),l.start(),s.add(t.apply(e)),n.preventDefault()}function U(n){const e=h.byDistance(0,!1).index!==y.get(),r=a.pointerUp(n)*(S?L:T)[V?"mouse":"touch"],o=function(n,t){const e=y.clone().add(-1*c(n)),r=h.byDistance(n,!S).distance;return S||i(n)<z?r:w&&t?.5*r:h.byIndex(e.get(),0).distance}(t.apply(r),e),s=function(n,t){if(0===n||0===t)return 0;if(i(n)<=i(t))return 0;const e=u(i(n),i(t));return i(e/n)}(r,o),d=k-10*s,l=E+s/50;C=!1,N=!1,P.clear(),p.useDuration(d).useFriction(l),f.distance(o,!S),V=!1,v.emit("pointerUp")}function q(n){R&&(n.stopPropagation(),n.preventDefault())}return{init:function(n,t){if(!t)return;function i(i){(e(t)||t(n,i))&&function(n){const t=o(n);if(V=t,t&&0!==n.button)return;if(function(n){const t=n.nodeName||"";return D.includes(t)}(n.target))return;R=S&&t&&!n.buttons&&B,B=u(s.get(),d.get())>=2,N=!0,a.pointerDown(n),I.set(s),p.useFriction(0).useDuration(0),s.set(d),function(){const n=V?document:r;P.add(n,"touchmove",j,A).add(n,"touchend",U).add(n,"mousemove",j,A).add(n,"mouseup",U)}(),H=a.readPoint(n),F=a.readPoint(n,M),v.emit("pointerDown")}(i)}const c=r;O.add(c,"dragstart",(n=>n.preventDefault()),A).add(c,"touchmove",(()=>{}),A).add(c,"touchend",(()=>{})).add(c,"touchstart",i).add(c,"mousedown",i).add(c,"touchcancel",U).add(c,"contextmenu",U).add(c,"click",q,!0)},pointerDown:function(){return N},destroy:function(){O.clear(),P.clear()}}}function v(n){let t,e;function r(n){return n.timeStamp}function c(t,e){const r="client"+("x"===(e||n.scroll)?"X":"Y");return(o(t)?t:t.touches[0])[r]}return{pointerDown:function(n){return t=n,e=n,c(n)},pointerMove:function(n){const o=c(n)-c(e),i=r(n)-r(t)>170;return e=n,i&&(t=n),o},pointerUp:function(n){if(!t||!e)return 0;const o=c(e)-c(t),u=r(n)-r(t),s=r(n)-r(e)>170,a=o/u;return u&&!s&&i(a)>.1?a:0},readPoint:c}}function b(n,t,r,o){let i,c,u=[],s=!1;function a(n){return r.measureSize(n.getBoundingClientRect())}return{init:function(r,d){if(!d)return;c=a(n),u=t.map(a),i=new ResizeObserver((i=>{s||(e(d)||d(r,i))&&function(e){for(const i of e){const e=i.target===n,s=t.indexOf(i.target);if((e?c:u[s])!==a(e?n:t[s])){r.reInit(),o.emit("resize");break}}}(i)})),[n].concat(t).forEach((n=>i.observe(n)))},destroy:function(){i&&i.disconnect(),s=!0}}}function S(n,t,e){const r=function(n){const t=Math.pow(10,n);return n=>Math.round(n*t)/t}(2),o=x(0);let i=0,u=t,s=e;function a(n){return u=n,l}function d(n){return s=n,l}const l={direction:function(){return i},seek:function(t){const e=t.get()-n.get();return!s||!u?(o.set(0),n.set(t)):(o.add(e/u),o.multiply(s),n.add(o)),i=c(o.get()||e),l},settle:function(t){const e=t.get()-n.get(),o=!r(e);return o&&n.set(t),o},useBaseFriction:function(){return d(e)},useBaseDuration:function(){return a(t)},useFriction:d,useDuration:a};return l}function w(n,t,e,r,o){const c=o.measure(10),u=o.measure(50),s=g(.1,.99);let a=!1;return{constrain:function(o){if(a||!n.reachedAny(e.get())||!n.reachedAny(t.get()))return;const d=n.reachedMin(t.get())?"min":"max",l=i(n[d]-t.get()),f=e.get()-t.get(),p=s.constrain(l/u);e.subtract(f*p),!o&&i(f)<c&&(e.set(n.constrain(e.get())),r.useDuration(25).useBaseFriction())},toggleActive:function(n){a=!n}}}function E(n,t,e,r){const o=g(-t+n,e[0]),i=e.map(o.constrain);return{snapsContained:function(){if(t<=n)return[o.max];if("keepSnaps"===r)return i;const{min:e,max:c}=function(){const n=i[0],t=a(i),e=i.lastIndexOf(n),r=i.indexOf(t)+1;return g(e,r)}();return i.slice(e,c)}()}}function M(n,t,e,r){const o=t.min+.1,i=t.max+.1,{reachedMin:c,reachedMax:u}=g(o,i);return{loop:function(t){if(!function(n){return 1===n?u(e.get()):-1===n&&c(e.get())}(t))return;const o=n*(-1*t);r.forEach((n=>n.add(o)))}}}function D(n){const{max:t,length:e}=n;return{get:function(n){return(n-t)/-e}}}function A(n,t,e,r,o){const{reachedAny:u,removeOffset:s,constrain:a}=r;function d(n){return n.concat().sort(((n,t)=>i(n)-i(t)))[0]}function l(t,r){const o=[t,t+e,t-e];if(!n)return o[0];if(!r)return d(o);return d(o.filter((n=>c(n)===r)))}return{byDistance:function(e,r){const c=o.get()+e,{index:d,distance:f}=function(e){const r=n?s(e):a(e),o=t.map((n=>n-r)).map((n=>l(n,0))).map(((n,t)=>({diff:n,index:t}))).sort(((n,t)=>i(n.diff)-i(t.diff))),{index:c}=o[0];return{index:c,distance:r}}(c),p=!n&&u(c);return!r||p?{index:d,distance:e}:{index:d,distance:e+l(t[d]-f,0)}},byIndex:function(n,e){return{index:n,distance:l(t[n]-o.get(),e)}},shortcut:l}}function I(n,t,e){const r="x"===n.scroll?function(n){return`translate3d(${n}px,0px,0px)`}:function(n){return`translate3d(0px,${n}px,0px)`},o=e.style;let i=!1;return{clear:function(){i||(o.transform="",e.getAttribute("style")||e.removeAttribute("style"))},to:function(n){i||(o.transform=r(t.apply(n.get())))},toggleActive:function(n){i=!n}}}function O(n,t,e,r,o,i,c,u,a){const d=s(o),l=s(o).reverse(),f=function(){const n=i[0]-1;return g(m(l,n),"end")}().concat(function(){const n=e-i[0]-1;return g(m(d,n),"start")}());function p(n,t){return n.reduce(((n,t)=>n-o[t]),t)}function m(n,t){return n.reduce(((n,e)=>p(n,t)>0?n.concat([e]):n),[])}function g(e,o){const i="start"===o,s=i?-r:r,d=c.findSlideBounds([s]);return e.map((e=>{const o=i?0:-r,c=i?r:0,s=d.filter((n=>n.index===e))[0][i?"end":"start"],l=x(-1),f=x(-1),p=I(n,t,a[e]);return{index:e,location:f,translate:p,target:()=>l.set(u.get()>s?o:c)}}))}return{canLoop:function(){return f.every((({index:n})=>p(d.filter((t=>t!==n)),e)<=.1))},clear:function(){f.forEach((n=>n.translate.clear()))},loop:function(){f.forEach((n=>{const{target:t,translate:e,location:r}=n,o=t();o.get()!==r.get()&&(0===o.get()?e.clear():e.to(o),r.set(o))}))},loopPoints:f}}function P(n,t){let r,o=!1;return{init:function(i,c){c&&(r=new MutationObserver((n=>{o||(e(c)||c(i,n))&&function(n){for(const e of n)if("childList"===e.type){i.reInit(),t.emit("slidesChanged");break}}(n)})),r.observe(n,{childList:!0}))},destroy:function(){r&&r.disconnect(),o=!0}}}function z(n,t,e,r,o,i,c){const{removeOffset:u,constrain:s}=o,a=i?[0,t,-t]:[0],d=l(a,c);function l(t,o){const i=t||a,c=function(n){const t=n||0;return e.map((n=>g(.5,n-.5).constrain(n*t)))}(o);return i.reduce(((t,o)=>{const i=r.map(((t,r)=>({start:t-e[r]+c[r]+o,end:t+n-c[r]+o,index:r})));return t.concat(i)}),[])}return{check:function(n,t){const e=i?u(n):s(n);return(t||d).reduce(((n,t)=>{const{index:r,start:o,end:i}=t;return!n.includes(r)&&(o<e&&i>e)?n.concat([r]):n}),[])},findSlideBounds:l}}function T(t,e,r){const o=n(r);return{groupSlides:function(n){return o?function(n,t){return s(n).filter((n=>n%t==0)).map((e=>n.slice(e,e+t)))}(n,r):function(n){return s(n).reduce(((n,r)=>{const o=e.slice(a(n),r+1).reduce(((n,t)=>n+t),0);return!r||o>t?n.concat(r):n}),[]).map(((t,e,r)=>n.slice(t,r[e+1])))}(n)}}}function L(n,t,e,r,o){const{align:c,axis:u,direction:l,startIndex:f,inViewThreshold:L,loop:k,duration:B,dragFree:H,slidesToScroll:F,skipSnaps:N,containScroll:C}=r,R=t.getBoundingClientRect(),V=e.map((n=>n.getBoundingClientRect())),j=function(n){const t="rtl"===n?-1:1;return{apply:function(n){return n*t}}}(l),U=function(n,t){const e="y"===n?"y":"x";return{scroll:e,cross:"y"===n?"x":"y",startEdge:"y"===e?"top":"rtl"===t?"right":"left",endEdge:"y"===e?"bottom":"rtl"===t?"left":"right",measureSize:function(n){const{width:t,height:r}=n;return"x"===e?t:r}}}(u,l),q=U.measureSize(R),$=function(n){return{measure:function(t){return n*(t/100)}}}(q),G=p(c,q),Q=!k&&!!C,W=k||!!C,{slideSizes:X,slideSizesWithGaps:Y}=function(n,t,e,r,o){const{measureSize:c,startEdge:u,endEdge:s}=n,l=e[0]&&o,f=function(){if(!l)return 0;const n=e[0];return i(t[u]-n[u])}(),p=function(){if(!l)return 0;const n=window.getComputedStyle(a(r));return parseFloat(n.getPropertyValue(`margin-${s}`))}(),m=e.map(c),g=e.map(((n,t,e)=>{const r=!t,o=t===d(e);return r?m[t]+f:o?m[t]+p:e[t+1][u]-n[u]})).map(i);return{slideSizes:m,slideSizesWithGaps:g}}(U,R,V,e,W),J=T(q,Y,F),{snaps:K,snapsAligned:Z}=function(n,t,e,r,o,c,u){const{startEdge:s,endEdge:l}=n,{groupSlides:f}=c,p=f(r).map((n=>a(n)[l]-n[0][s])).map(i).map(t.measure),m=r.map((n=>e[s]-n[s])).map((n=>-i(n))),g=function(){const n=a(m)-a(o);return f(m).map((n=>n[0])).map(((t,e,r)=>{const o=!e,i=e===d(r);return u&&o?0:u&&i?n:t+p[e]}))}();return{snaps:m,snapsAligned:g}}(U,G,R,V,Y,J,Q),_=-a(K)+a(Y),{snapsContained:nn}=E(q,_,Z,C),tn=Q?nn:Z,{limit:en}=function(n,t,e){return{limit:function(){const r=t[0],o=a(t);return g(e?r-n:o,r)}()}}(_,tn,k),rn=h(d(tn),f,k),on=rn.clone(),cn=s(e);const un=function(n,t){const e=m(),r=1e3/60;let o,i=null,c=0,u=0;function s(n,t){return()=>{n===!!u&&t()}}function a(e){if(!i)return i=e,d();for(c+=e-i,i=e;c>=r;)n(o),c-=r;t(o),u&&d()}function d(){u=window.requestAnimationFrame(a)}function l(){window.cancelAnimationFrame(u),i=null,u=0}return{init:function(n){o=n,e.add(document,"visibilitychange",(()=>{document.hidden&&(i=null)}))},destroy:function(){l(),e.clear()},start:s(!1,d),stop:s(!0,l)}}((function({target:n,dragHandler:t,scrollBody:e,scrollBounds:r,scrollLooper:o,slideLooper:i,eventHandler:c,animation:u}){const s=t.pointerDown();k||r.constrain(s);const a=e.seek(n).settle(n);a&&!s&&(u.stop(),c.emit("settle")),a||c.emit("scroll"),k&&(o.loop(e.direction()),i.loop())}),(function({translate:n,location:t}){n.to(t)})),sn=tn[rn.get()],an=x(sn),dn=x(sn),ln=S(an,B,.68),fn=A(k,tn,_,en,dn),pn=function(n,t,e,r,o,i){function c(r){const c=r.distance,u=r.index!==t.get();c&&(n.start(),o.add(c)),u&&(e.set(t.get()),t.set(r.index),i.emit("select"))}return{distance:function(n,t){c(r.byDistance(n,t))},index:function(n,e){const o=t.clone().set(n);c(r.byIndex(o.get(),e))}}}(un,rn,on,fn,dn,o),mn=z(q,_,X,K,en,k,L);return{eventHandler:o,containerRect:R,slideRects:V,animation:un,axis:U,direction:j,dragHandler:y(U,j,n,dn,v(U),an,un,pn,ln,fn,rn,o,$,H,N,.68),eventStore:m(),percentOfView:$,index:rn,indexPrevious:on,limit:en,location:an,options:r,resizeHandler:b(t,e,U,o),scrollBody:ln,scrollBounds:w(en,an,dn,ln,$),scrollLooper:M(_,en,an,[an,dn]),scrollProgress:D(en),scrollSnaps:tn,scrollTarget:fn,scrollTo:pn,slideLooper:O(U,j,q,_,Y,tn,mn,an,e),slidesHandler:P(t,o),slidesInView:mn,slideIndexes:cn,slidesToScroll:J,target:dn,translate:I(U,j,t)}}const k={align:"center",axis:"x",container:null,slides:null,containScroll:null,direction:"ltr",slidesToScroll:1,breakpoints:{},dragFree:!1,inViewThreshold:0,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0};function B(){function n(n,t){return f(n,t||{})}const t={mergeOptions:n,optionsAtMedia:function(t){const e=t.breakpoints||{},r=l(e).filter((n=>window.matchMedia(n).matches)).map((n=>e[n])).reduce(((t,e)=>n(t,e)),{});return n(t,r)},optionsMediaQueries:function(n){return n.map((n=>l(n.breakpoints||{}))).reduce(((n,t)=>n.concat(t)),[]).map(window.matchMedia)}};return t}function H(n,e,r){const o=m(),i=function(){const n=B();let t=[];return{init:function(e,r){return t=e.filter((({options:t})=>!1!==n.optionsAtMedia(t).active)),t.forEach((t=>t.init(r,n))),e.reduce(((n,t)=>Object.assign(n,{[t.name]:t})),{})},destroy:function(){t=t.filter((n=>n.destroy()))}}}(),c=function(){const n={};let t;function e(t){return n[t]||[]}const r={init:function(n){t=n},emit:function(n){return e(n).forEach((e=>e(t,n))),r},off:function(t,o){return n[t]=e(t).filter((n=>n!==o)),r},on:function(t,o){return n[t]=e(t).concat([o]),r}};return r}(),{mergeOptions:u,optionsAtMedia:s,optionsMediaQueries:a}=B(),{on:d,off:l,emit:f}=c,p=M;let g,h,x,y,v=!1,b=u(k,H.globalOptions),S=u(b),w=[];function E(e,r){if(!v){if(b=u(b,e),S=s(b),function(){const{container:e,slides:r}=S,o=t(e)?n.querySelector(e):e;x=o||n.children[0];const i=t(r)?x.querySelectorAll(r):r;y=[].slice.call(i||x.children)}(),g=L(n,x,y,S,c),!S.active)return D();if(g.translate.to(g.location),w=r||w,h=i.init(w,P),a([b,...w.map((({options:n})=>n))]).forEach((n=>o.add(n,"change",M))),g.animation.init(g),g.eventHandler.init(P),g.resizeHandler.init(P,S.watchResize),g.slidesHandler.init(P,S.watchSlides),S.loop){if(!g.slideLooper.canLoop())return D(),E({loop:!1},r),void(b=u(b,{loop:!0}));g.slideLooper.loop()}x.offsetParent&&y.length&&g.dragHandler.init(P,S.watchDrag)}}function M(n,t){const e=O();D(),E(u({startIndex:e},n),t),c.emit("reInit")}function D(){g.dragHandler.destroy(),g.animation.destroy(),g.eventStore.clear(),g.translate.clear(),g.slideLooper.clear(),g.resizeHandler.destroy(),g.slidesHandler.destroy(),i.destroy(),o.clear()}function A(n){const t=g[n?"target":"location"].get(),e=S.loop?"removeOffset":"constrain";return g.slidesInView.check(g.limit[e](t))}function I(n,t,e){S.active&&!v&&(g.scrollBody.useBaseFriction().useDuration(t?0:S.duration),g.scrollTo.index(n,e||0))}function O(){return g.index.get()}const P={canScrollNext:function(){return g.index.clone().add(1).get()!==O()},canScrollPrev:function(){return g.index.clone().add(-1).get()!==O()},containerNode:function(){return x},internalEngine:function(){return g},destroy:function(){v||(v=!0,o.clear(),D(),c.emit("destroy"))},off:l,on:d,emit:f,plugins:function(){return h},previousScrollSnap:function(){return g.indexPrevious.get()},reInit:p,rootNode:function(){return n},scrollNext:function(n){I(g.index.clone().add(1).get(),!0===n,-1)},scrollPrev:function(n){I(g.index.clone().add(-1).get(),!0===n,1)},scrollProgress:function(){return g.scrollProgress.get(g.location.get())},scrollSnapList:function(){return g.scrollSnaps.map(g.scrollProgress.get)},scrollTo:I,selectedScrollSnap:O,slideNodes:function(){return y},slidesInView:A,slidesNotInView:function(n){const t=A(n);return g.slideIndexes.filter((n=>!t.includes(n)))}};return E(e,r),setTimeout((()=>c.emit("init")),0),P}return H.globalOptions=void 0,H}));
